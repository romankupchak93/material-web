{"version":3,"file":"action-controller_test.js","sourceRoot":"","sources":["action-controller_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// import 'jasmine'; (google3-only)\n\nimport {html, LitElement} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\n\nimport {Environment} from '../testing/environment.js';\nimport {Harness} from '../testing/harness.js';\n\nimport {ActionController, ActionControllerHost, BeginPressConfig, EndPressConfig, TOUCH_DELAY_MS, WAIT_FOR_MOUSE_CLICK_MS} from './action-controller.js';\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'my-action-element': MyActionElement;\n  }\n}\n\ninterface ActionControllerInternals {\n  disabled: boolean;\n  ignoreClicksWithModifiers: boolean;\n  phase: string;\n  pressed: boolean;\n  checkBoundsAfterContextMenu: boolean;\n  lastPositionEvent: PointerEvent|null;\n}\n\n@customElement('my-action-element')\nclass MyActionElement extends LitElement implements ActionControllerHost {\n  @property({type: Boolean}) disabled = false;\n\n  @property({type: Boolean}) ignoreClicksWithModifiers = false;\n\n  actionController = new ActionController(this);\n\n  lastBegin?: BeginPressConfig;\n  lastEnd?: EndPressConfig;\n\n  beginPress(info: BeginPressConfig) {\n    this.lastBegin = info;\n  }\n\n  endPress(info: EndPressConfig) {\n    this.lastEnd = info;\n  }\n\n  override render() {\n    return html`<div\n      tabindex=-1\n      @pointerdown=${this.handlePointerDown}\n      @pointerup=${this.handlePointerUp}\n      @pointercancel=${this.handlePointerCancel}\n      @pointerleave=${this.handlePointerLeave}\n      @click=${this.handleClick}\n      @contextmenu=${this.handleContextMenu}\n    ></div>`;\n  }\n\n  handlePointerDown(e: PointerEvent) {\n    this.actionController.pointerDown(e);\n  }\n\n  handlePointerUp(e: PointerEvent) {\n    this.actionController.pointerUp(e);\n  }\n\n  handlePointerCancel(e: PointerEvent) {\n    this.actionController.pointerCancel(e);\n  }\n\n  handlePointerLeave(e: PointerEvent) {\n    this.actionController.pointerLeave(e);\n  }\n\n  handleClick(e: MouseEvent) {\n    this.actionController.click(e);\n  }\n\n  handleContextMenu() {\n    this.actionController.contextMenu();\n  }\n}\n\nclass ActionControllerHarness extends Harness<MyActionElement> {\n  protected override async getInteractiveElement() {\n    await this.element.updateComplete;\n    return this.element.renderRoot.querySelector('div') as HTMLElement;\n  }\n}\n\ndescribe('ActionController', () => {\n  const env = new Environment();\n  let el!: MyActionElement;\n  let harness!: ActionControllerHarness;\n\n  describe('mouse', () => {\n    beforeEach(async () => {\n      const root = env.render(html`<my-action-element></my-action-element>`);\n      el = root.querySelector('my-action-element')!;\n      harness = new ActionControllerHarness(el);\n      await env.waitForStability();\n    });\n\n    it('calls beginPress on down', async () => {\n      await harness.startClickWithMouse();\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n    });\n\n    it('calls endPress on up', async () => {\n      await harness.clickWithMouse();\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      expect(el.lastEnd).toBeDefined();\n      expect(el.lastEnd).toEqual({cancelled: false});\n    });\n\n    it('ignores presses from other mouse buttons', async () => {\n      await harness.rightClickWithMouse();\n      expect(el.lastBegin).not.toBeDefined();\n      expect(el.lastEnd).not.toBeDefined();\n    });\n\n    it('goes through the expected phases during a press', async () => {\n      await harness.startClickWithMouse();\n      const ac = el.actionController as unknown as ActionControllerInternals;\n      expect(ac.phase).toEqual('WAITING_FOR_MOUSE_CLICK');\n      await harness.endClickWithMouse();\n      expect(ac.phase).toEqual('INACTIVE');\n    });\n\n    it('cancels press if cursor leaves element during press', async () => {\n      await harness.startClickWithMouse();\n      await harness.endHover();\n      expect(el.lastEnd).toEqual({cancelled: true});\n    });\n\n    it('allows clicks with modifier keys by default', async () => {\n      await harness.clickWithMouse({altKey: true});\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      expect(el.lastEnd).toEqual({cancelled: false});\n    });\n\n    it('ignores clicks with modifier keys when `ignoreClicksWithModifiers` is set',\n       async () => {\n         el.ignoreClicksWithModifiers = true;\n         await el.updateComplete;\n         await harness.clickWithMouse({altKey: true});\n         expect(el.lastBegin).not.toBeDefined();\n         expect(el.lastEnd).not.toBeDefined();\n       });\n\n    it('cancels when removed from dom', async () => {\n      await harness.startClickWithMouse();\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      el.remove();\n      expect(el.lastEnd).toEqual({cancelled: true});\n    });\n  });\n\n  describe('keyboard', () => {\n    beforeEach(async () => {\n      const root = env.render(html`<my-action-element></my-action-element>`);\n      el = root.querySelector('my-action-element')!;\n      harness = new ActionControllerHarness(el);\n      await env.waitForStability();\n    });\n\n    it('responds to keyboard clicks', async () => {\n      await harness.clickWithKeyboard();\n      expect(el.lastBegin).toEqual({positionEvent: null});\n      expect(el.lastEnd).toEqual({cancelled: false});\n    });\n\n    it('responds to keyboard clicks with modifiers by default', async () => {\n      await harness.clickWithKeyboard({altKey: true});\n      expect(el.lastBegin).toEqual({positionEvent: null});\n      expect(el.lastEnd).toEqual({cancelled: false});\n    });\n\n    it('ignores keyboard clicks with modifiers when `ignoreClicksWithModifiers` is set',\n       async () => {\n         el.ignoreClicksWithModifiers = true;\n         await el.updateComplete;\n         await harness.clickWithKeyboard({altKey: true});\n         expect(el.lastBegin).not.toBeDefined();\n         expect(el.lastEnd).not.toBeDefined();\n       });\n  });\n\n  describe('touch', () => {\n    beforeEach(async () => {\n      const root = env.render(html`<my-action-element></my-action-element>`);\n      el = root.querySelector('my-action-element')!;\n      harness = new ActionControllerHarness(el);\n      await env.waitForStability();\n    });\n\n    it('calls beginPress on down after hysteresis', async () => {\n      await harness.startTap();\n      jasmine.clock().tick(TOUCH_DELAY_MS);\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n    });\n\n    it('calls endPress on up', async () => {\n      await harness.tap();\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      expect(el.lastEnd).toBeDefined();\n      expect(el.lastEnd).toEqual({cancelled: false});\n    });\n\n    it('goes through the expected phases during a long press', async () => {\n      const ac = el.actionController as unknown as ActionControllerInternals;\n      expect(ac.phase).toEqual('INACTIVE');\n      await harness.startTap();\n      expect(ac.phase).toEqual('TOUCH_DELAY');\n      jasmine.clock().tick(TOUCH_DELAY_MS);\n      expect(ac.phase).toEqual('HOLDING');\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      await harness.endTap();\n      expect(ac.phase).toEqual('WAITING_FOR_MOUSE_CLICK');\n      await harness.endTapClick();\n      expect(ac.phase).toEqual('INACTIVE');\n      expect(el.lastEnd).toEqual({cancelled: false});\n    });\n\n    it('goes through the expected phases during a short press', async () => {\n      const ac = el.actionController as unknown as ActionControllerInternals;\n      expect(ac.phase).toEqual('INACTIVE');\n      await harness.startTap();\n      expect(ac.phase).toEqual('TOUCH_DELAY');\n      expect(el.lastBegin).not.toBeDefined();\n      await harness.endTap();\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      expect(ac.phase).toEqual('WAITING_FOR_MOUSE_CLICK');\n      await harness.endTapClick();\n      expect(ac.phase).toEqual('INACTIVE');\n      expect(el.lastEnd).toEqual({cancelled: false});\n    });\n\n    it('cancels press if a held press is very long', async () => {\n      await harness.startTap();\n      await harness.endTap();\n      expect(el.lastBegin).toBeDefined();\n      expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n      jasmine.clock().tick(WAIT_FOR_MOUSE_CLICK_MS);\n      expect(el.lastEnd).toEqual({cancelled: true});\n    });\n\n    it('ignores non-primary touch gestures', async () => {\n      await harness.tap({isPrimary: false});\n      expect(el.lastBegin).not.toBeDefined();\n      expect(el.lastEnd).not.toBeDefined();\n    });\n\n    describe('contextmenu', () => {\n      it('ignores the interaction if the context menu opens during a short press',\n         async () => {\n           await harness.startTap();\n           await harness.startTapContextMenu();\n           expect(el.lastBegin).not.toBeDefined();\n           expect(el.lastEnd).not.toBeDefined();\n         });\n\n      it('cancels press if the context menu opens during a longer press',\n         async () => {\n           await harness.startTap();\n           jasmine.clock().tick(TOUCH_DELAY_MS);\n           await harness.startTapContextMenu();\n           expect(el.lastBegin).toBeDefined();\n           expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n           expect(el.lastEnd).toEqual({cancelled: true});\n         });\n\n      it('ignores out of bounds downs after the contextmenu opens',\n         async () => {\n           await harness.startTap();\n           await harness.startTapContextMenu();\n           // set a _way out of bounds_ position, which would indicate pressing\n           // on a different element\n           await harness.startTap({clientX: 9000, clientY: 9000});\n           jasmine.clock().tick(TOUCH_DELAY_MS);\n           expect(el.lastBegin).not.toBeDefined();\n         });\n    });\n\n    describe('cancel', () => {\n      it('ignores the interaction if `pointercancel` happens during a short press',\n         async () => {\n           await harness.startTap();\n           await harness.cancelTap();\n           expect(el.lastBegin).not.toBeDefined();\n           expect(el.lastEnd).not.toBeDefined();\n         });\n\n      it('cancels press if a `pointercancel` event fires during a longer press',\n         async () => {\n           await harness.startTap();\n           jasmine.clock().tick(TOUCH_DELAY_MS);\n           expect(el.lastBegin).toBeDefined();\n           expect(el.lastBegin!.positionEvent).toBeInstanceOf(PointerEvent);\n           await harness.cancelTap();\n           expect(el.lastEnd).toEqual({cancelled: true});\n         });\n    });\n  });\n\n  describe('disabled', () => {\n    let ac!: ActionControllerInternals;\n    beforeEach(async () => {\n      const root = env.render(html`<my-action-element></my-action-element>`);\n      el = root.querySelector('my-action-element')!;\n      harness = new ActionControllerHarness(el);\n      ac = el.actionController as unknown as ActionControllerInternals;\n      await env.waitForStability();\n    });\n\n    it('controller mirrors disabled property of element', async () => {\n      expect(ac.disabled).toEqual(false);\n      el.disabled = true;\n      expect(ac.disabled).toEqual(true);\n    });\n\n    it('cancels press when disabled', async () => {\n      await harness.startClickWithMouse();\n      expect(ac.pressed).toEqual(true);\n      expect(el.lastBegin).toBeDefined();\n      el.disabled = true;\n      await el.updateComplete;\n      expect(ac.pressed).toEqual(false);\n      expect(el.lastEnd).toEqual({cancelled: true});\n    });\n\n    it('does not register interactions when disabled', async () => {\n      el.disabled = true;\n      await el.updateComplete;\n      await harness.clickWithMouse();\n      expect(el.lastBegin).not.toBeDefined();\n      expect(el.lastEnd).not.toBeDefined();\n    });\n  });\n});\n"]}