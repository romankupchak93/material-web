{"version":3,"file":"bound_test.js","sourceRoot":"","sources":["bound_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// import 'jasmine'; (google3-only)\n\nimport {bound} from '../bound.js';\n\ndescribe('@bound', () => {\n  class MyClass {\n    @bound\n    property = function(this: unknown) {\n      return this as MyClass;\n    };\n\n    propertyGetAndSetValue = function(this: unknown) {\n      return this as MyClass;\n    };\n    @bound\n    get propertyGetAndSet() {\n      return this.propertyGetAndSetValue;\n    }\n    set propertyGetAndSet(value: () => MyClass) {\n      this.propertyGetAndSetValue = value;\n    }\n\n    @bound\n    get propertyGetOnly() {\n      return function(this: unknown) {\n        return this as MyClass;\n      };\n    }\n\n    @bound\n    set propertySetOnly(value: () => MyClass) {\n      this.propertySetOnlyValue = value;\n    }\n\n    propertySetOnlyValue: () => MyClass = () => this;\n\n    @bound\n    method() {\n      return this;\n    }\n  }\n\n\n  let instanceOne: MyClass;\n  let instanceTwo: MyClass;\n\n  beforeEach(() => {\n    instanceOne = new MyClass();\n    instanceTwo = new MyClass();\n  });\n\n  it('should bind methods', () => {\n    const instanceOneFn = instanceOne.method;\n    const instanceTwoFn = instanceTwo.method;\n    expect(instanceOneFn()).toBe(instanceOne);\n    expect(instanceTwoFn()).toBe(instanceTwo);\n  });\n\n  it('should bind properties', () => {\n    const instanceOneFn = instanceOne.property;\n    const instanceTwoFn = instanceTwo.property;\n    expect(instanceOneFn()).toBe(instanceOne);\n    expect(instanceTwoFn()).toBe(instanceTwo);\n  });\n\n  it('should bind properties with getter and setter', () => {\n    let instanceOneFn = instanceOne.propertyGetAndSet;\n    let instanceTwoFn = instanceTwo.propertyGetAndSet;\n    expect(instanceOneFn()).toBe(instanceOne);\n    expect(instanceTwoFn()).toBe(instanceTwo);\n\n    function newValue(this: MyClass) {\n      return this;\n    }\n\n    instanceOne.propertyGetAndSet = newValue;\n    instanceTwo.propertyGetAndSet = newValue;\n    instanceOneFn = instanceOne.propertyGetAndSet;\n    instanceTwoFn = instanceTwo.propertyGetAndSet;\n    expect(instanceOneFn()).toBe(instanceOne);\n    expect(instanceTwoFn()).toBe(instanceTwo);\n  });\n\n  it('should bind properties with getter only', () => {\n    const instanceOneFn = instanceOne.propertyGetOnly;\n    const instanceTwoFn = instanceTwo.propertyGetOnly;\n    expect(instanceOneFn()).toBe(instanceOne);\n    expect(instanceTwoFn()).toBe(instanceTwo);\n  });\n\n  it('should bind properties with setter only', () => {\n    function newValue(this: MyClass) {\n      return this;\n    }\n\n    instanceOne.propertySetOnly = newValue;\n    instanceTwo.propertySetOnly = newValue;\n    const instanceOneFn = instanceOne.propertySetOnlyValue;\n    const instanceTwoFn = instanceTwo.propertySetOnlyValue;\n    expect(instanceOneFn()).toBe(instanceOne);\n    expect(instanceTwoFn()).toBe(instanceTwo);\n  });\n});\n"]}