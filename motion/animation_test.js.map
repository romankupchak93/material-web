{"version":3,"file":"animation_test.js","sourceRoot":"","sources":["animation_test.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// import 'jasmine'; (google3-only)\nimport {AnimationSignal, createAnimationSignal, createThrottle, msFromTimeCSSValue} from './animation.js';\n\ndescribe('createAnimationSignal()', () => {\n  let task: AnimationSignal;\n\n  beforeEach(() => {\n    task = createAnimationSignal();\n  });\n\n  describe('start()', () => {\n    it('should return an AbortSignal', () => {\n      const signal = task.start();\n      expect(signal).toBeInstanceOf(AbortSignal);\n    });\n\n    it('should abort previous signal on subsequent calls', () => {\n      const firstSignal = task.start();\n      expect(firstSignal.aborted)\n          .withContext('first signal should not be aborted by default')\n          .toBeFalse();\n      const secondSignal = task.start();\n      expect(firstSignal.aborted)\n          .withContext('first signal should abort after start is called again')\n          .toBeTrue();\n      expect(secondSignal.aborted)\n          .withContext('second signal should not be aborted by default')\n          .toBeFalse();\n    });\n  });\n\n  describe('finish()', () => {\n    it('should not abort the AbortSignal', () => {\n      const signal = task.start();\n      task.finish();\n      expect(signal.aborted)\n          .withContext('finishing a task should not signal an abort')\n          .toBeFalse();\n    });\n\n    it('should not abort previous tasks when starting after finishing', () => {\n      const firstSignal = task.start();\n      task.finish();\n      task.start();\n      expect(firstSignal.aborted)\n          .withContext('starting a new task should not finished tasks')\n          .toBeFalse();\n    });\n  });\n});\n\n\ndescribe('createThrottle()', () => {\n  it('throttles calls', async () => {\n    const throttle = createThrottle();\n    const key = 'foo';\n    const fn = jasmine.createSpy();\n    let timeoutResolver: Function|null = null;\n    const timeout = new Promise(r => {\n      timeoutResolver = r;\n    });\n    const timeoutFn = async () => {\n      await timeout;\n    };\n    const t1 = throttle(key, fn, timeoutFn);\n    const t2 = throttle(key, fn, timeoutFn);\n    const t3 = throttle(key, fn, timeoutFn);\n    expect(fn).not.toHaveBeenCalled();\n    timeoutResolver!();\n    await Promise.all([t1, t2, t3]);\n    expect(fn).toHaveBeenCalledTimes(1);\n  });\n});\n\ndescribe('msFromTimeCSSValue()', () => {\n  it('parses values in ms', () => {\n    const n = msFromTimeCSSValue('57ms');\n    expect(n).toBe(57);\n  });\n\n  it('parses values in s', () => {\n    const n = msFromTimeCSSValue('1.23s');\n    expect(n).toBe(1230);\n  });\n});"]}